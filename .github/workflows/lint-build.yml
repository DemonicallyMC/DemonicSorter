name: Lint & Build

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  lint:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v2
        
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Set up JDK 1.8
      uses: actions/setup-java@v1
      with:
        java-version: 1.8

    - name: Build Project
      uses: burrunan/gradle-cache-action@v1
      with:
        gradle-version: current
        job-id: hashFiles('./gradle.properties', './src/main/resources/fabric.mod.json')
        arguments: |
          build
          javadoc

    - name: Upload Build Products
      uses: actions/upload-artifact@v2.2.2
      with:
        name: Build Products
        path: |
          ./build/docs/
          ./build/libs/
